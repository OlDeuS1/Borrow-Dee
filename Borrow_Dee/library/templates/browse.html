{% extends "layouts/layout.html" %}
{% load static %}

{% block title %} Browse {% endblock %}

{% block header %}
    {% include "layouts/navigation.html" with active="browse" %}
{% endblock %}

{% block content %}
    <div class="browse flex gap-40 mt-10 relative">
        <form action="{% url 'browse' %}" method="get" class="max-w-[30rem] w-full sticky top-0 h-fit">
            {% include "components/searchComponent.html" with search_query=search_query %}
            {% include "components/filterComponent.html" with authors=authors categories=categories sort=sort filter_categories=filter_categories filter_authors=filter_authors filter_availability=filter_availability %}
        </form>
        <div class="browse__content w-full">
            <div class="browse__results text-[2rem]">Results ({{ books.count }} found)</div>
            {% if books %}
                <div class="books grid grid-cols-5 content-between gap-14 mt-12">
                    {% for book in books %}
                        <a href="{% url 'book_detail' book.id %}" class="border-gray-300 border rounded-[1.5rem] hover:scale-[105%] transition-all">
                            <div class="book text-center relative">
                                <img src="{% if book.image %}{{ book.image }}{% else %} {% static 'images/No_image_available.svg' %} {% endif %}" alt="{{ book.title }}">
                                <div class="book-detail flex flex-col justify-between items-center gap-[.3rem] mt-6 p-2">
                                    <div class="text-[1.6rem]">{{ book.title }}</div>
                                    <p class="text-[#E07A5F] text-[1.4rem]">Rating : {% if book.avg_rating %} {{ book.avg_rating }} {% else %} N/A {% endif %}</p>
                                </div>
                            </div>
                        </a>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-gray-500 mt-6 text-center">No books found.</p>
            {% endif %}
        </div>
    </div>
{% endblock %}